---
source: Rmd
title: RとRStudio
teaching: 30
exercises: 0
---

```{r, include=FALSE}
```

::::::::::::::::::::::::::::::::::::::: objectives

- RStudio スクリプト、コンソール、環境、およびプロットペインの目的について説明します。
- Rプロジェクトとして一連の分析のためのファイルとディレクトリを整理し、作業ディレクトリの目的を理解する。
- RStudio 組み込みのヘルプインターフェイスを使用して、R 関数の詳細情報を検索します。
- Rのユーザーコミュニティとトラブルシューティングのために十分な情報を提供する方法を示す。

::::::::::::::::::::::::::::::::::::::::::::::::::

:::::::::::::::::::::::::::::::::::::::: questions

- RとRStudioとは何ですか？

::::::::::::::::::::::::::::::::::::::::::::::::::

> このエピソードは、Data Carpentriesの_Data Analysis and
> Visualisation in R for Ecologists_レッスンに基づいています。

## Rとは？ RStudioとは何ですか?

R](https://www.r-project.org/)という用語は、
_プログラミング言語_、統計計算_のための_環境
、それを使って書かれたスクリプトを解釈する_ソフトウェア_を指すのに使われる。

[RStudio](https://rstudio.com)は現在、Rスクリプトを書くだけでなく、R
ソフトウェア[^plainr]と対話するための非常に人気のある方法です。 RStudio を正しく機能させるには、R と
が必要です。

[^plainr]: コマンドライン
    コンソールから直接Rを使うのとは対照的だ。
    、Rとインターフェイスし統合するソフトウェアは他にもあるが、RStudioは非常に高度な機能を数多く備えながら、特に初心者向け
    。

RStudio IDE Cheat
Sheet](https://raw.githubusercontent.com/rstudio/cheatsheets/main/rstudio-ide.pdf)
、ここで説明するよりもはるかに多くの情報を提供していますが、キーボードショートカットを学んだり、新しい機能を発見したりするのに便利です。

## なぜRを学ぶのか？

### Rはポインティングやクリックを多用しない。

学習曲線は他のソフトウェアよりも急かもしれないが、
Rを使えば、分析結果は
のポインティングとクリックの連続を覚えることに依存するのではなく、代わりに
の一連のコマンドを書くことに依存する！
そのため、より多くのデータを収集したため、
分析をやり直したい場合、
結果を得るためにどのボタンをどの順番でクリックしたかを覚えておく必要はない。スクリプトを再度実行するだけでよい。

スクリプトを使用することで、分析で使用したステップが明確になり、
、書いたコードを他の誰かが検査することができ、
フィードバックを与え、間違いを発見することができる。

スクリプトを使って仕事をすることで、自分がやっている
の内容をより深く理解することになり、自分が使っている
メソッドの学習と理解が容易になる。

### Rコードは再現性に優れている

再現性とは、同じデータセットから同じ解析コード（
）を使ったときに、他の誰か（未来の自分を含む）が
、同じ結果を得られることを意味する。

Rは他のツールと統合し、
のコードから原稿やレポートを作成することができる。 さらにデータを集めたり、データセットの誤りを修正したりすると、原稿や報告書の
図や統計検定が自動的に更新されます。
。

ジャーナルや研究助成機関では、
、再現性のある分析を求めるところが増えている。Rを知っていれば、このような
。

### Rは学際的で拡張性がある

機能を拡張するためにインストールできる10000以上のパッケージ[^whatarepkgs]により、Rは、
多くの科学分野からの統計的アプローチを組み合わせることができるフレームワークを提供し、
データの分析に必要な分析フレームワークに最適です。 例えば、
Rには画像分析、GIS、時系列、集団
遺伝学、その他多くのパッケージがある。

[^whatarepkgs]: すなわち、バイオインフォマティクスのデータ解析など、Rに新しい機能を付与するアドオンである。
    。

```{r, fig.cap="Exponential increase of the number of packages available on [CRAN](https://cran.r-project.org/), the Comprehensive R Archive Network. From the R Journal, Volume 10/2, December 2018.", echo=FALSE, message=FALSE}
knitr::include_graphics("fig/cran.png")
```

### Rはあらゆる形や大きさのデータを扱う

Rで学ぶスキルは、
データセットの大きさに合わせて簡単にスケールアップできる。 データセットの行数が数百行であろうと数百万行であろうと、
、大差はないだろう。

Rはデータ分析用に設計されている。 欠損データや統計的
因子の取り扱いを便利にする特別なデータ構造
とデータ型が付属している。

Rは、スプレッドシート、データベース、その他多くのデータ形式、
、コンピュータ上またはウェブ上に接続することができます。

### Rは高品質のグラフィックを作成する

Rのプロット機能は充実しており、
データからのメッセージを最も効果的に伝えるために、グラフのあらゆる面を調整することができる。

### Rは大きく歓迎されるコミュニティ

何千人もの人々が毎日Rを利用している。 彼らの多くは、メーリングリストやStack
Overflowのようなウェブサイト、またはRStudio
communityを通じて、
。 こうした広範なユーザー・コミュニティは、
、バイオインフォマティクスのような専門分野にも広がっている。 Rコミュニティのそのようなサブセットの1つが、[Bioconductor](https://bioconductor.org/)である。"現在および将来の生物学的アッセイからのデータの "分析と理解のための科学的プロジェクトである。 このワークショップは、Bioconductor コミュニティのメンバーによって開発されました。Bioconductor についての詳細は、関連ワークショップ ["The Bioconductor Project"](https://carpentries-incubator.github.io/bioc-project/) をご覧ください。

### Rは無料であるだけでなく、オープンソースでクロスプラットフォームである。

Rがどのように動作するかは、誰でもソースコードを調べることができる。 この
の透明性により、ミスが発生する可能性は低くなり、もしあなた（または
他の誰か）がミスを発見したら、バグを報告して修正することができる。

## RStudioを使いこなす

まずは[RStudio](https://www.rstudio.com/)について学んでみよう。
は
R を扱うための統合開発環境(IDE)だ。

RStudio IDE オープンソース製品は、Affero General
Public License (AGPL) v3の下でフリーです。
RStudio IDE は、Posit, Inc.の商用ライセンスおよび
優先メールサポートでもご利用いただけます。

RStudio IDE を使ってコードを書き、
コンピュータ上のファイルを操作し、これから作成する変数を検査し、
生成するプロットを視覚化する。 RStudioは他にも
（例：バージョン管理、パッケージの開発、Shynyアプリの作成）にも使えます。
ワークショップでは取り上げません。

```{r, results="markup", fig.cap="RStudio interface screenshot. Clockwise from top left: Source, Environment/History, Files/Plots/Packages/Help/Viewer, Console.", echo=FALSE, purl=FALSE, out.width="100%", fig.align="center"}
knitr::include_graphics("fig/rstudio-screenshot.png")
```

RStudio ウィンドウは 4 つの「ペイン」に分かれています：

- スクリプトとドキュメントの **ソース** (
  のデフォルトレイアウトでは左上)
- あなたの**環境/歴史**（右上）、
- あなたの**Files/Plots/Packages/Help/Viewer**（右下）、そして
- R **コンソール**（左下）。

これらのペインの配置とその内容はカスタマイズすることができます（
メニューの `Tools -> Global Options -> Pane Layout` を参照してください）。

RStudioを使う利点の1つは、コードを書くために必要なすべての情報（
）が1つのウィンドウで利用できることです。 さらに、
多くのショートカット、**オートコンプリート**、およびRでの開発中に使用する主な
ファイルタイプの**ハイライト**により、RStudioは
の入力を容易にし、エラーを少なくします。

## セットアップ

関連するデータ、分析、テキスト（
）のセットは、**working
directory**と呼ばれる1つのフォルダに自己完結させておくのがよい習慣である。 このフォルダー内のすべてのスクリプトは、
**相対パス** を使用して、
ファイルがプロジェクト内のどこにあるかを示すことができます（
ファイルが特定のコンピューター上のどこにあるかを示す絶対パスとは異なります）。 この方法で作業することで、
、自分のコンピュータ上でプロジェクトを移動したり、
他の人と共有したりすることが、基盤となるスクリプト
がまだ動くかどうかを心配することなく、とても簡単になる。

RStudioは、"Projects"
インターフェイスを通じて、このような作業を行うための便利なツールセットを提供しています。このツールは、作業ディレクトリを作成するだけでなく、
その場所を記憶し（すぐに移動できるようになります）、
カスタム設定や開いているファイルを保存して、
休憩後に作業を再開しやすくすることもできます。 この
チュートリアルのための "Rプロジェクト "の作成手順を以下に示す。

1. RStudioを起動します。
2. File`メニューの下にある`New project`をクリックする。 新規ディレクトリ`を選択し、
   `新規プロジェクト`を選択する。
3. この新しいフォルダ（または「ディレクトリ」）の名前を入力し、
   便利な場所を選択します。 これはこのセッション (またはコース全体) の **作業ディレクトリ**
   になります (例 `bioc-intro`)。
4. Create project\`をクリックする。
5. (オプション）RStudio でワークスペースを保存しない設定にします。

RStudioのデフォルトの環境設定は一般的にうまく機能しますが、ワークスペースを
.RDataに保存するのは、特に大きなデータセットを扱う場合は面倒です。
これをオフにするには、「ツール」→「グローバル・オプション」で、終了時に「ワークスペースを.RDataに保存する」
「決してしない」オプションを選択します。

```{r, results="markup", fig.cap="Set 'Save workspace to .RData on exit' to 'Never'", echo=FALSE, purl=FALSE, out.width="70%", fig.align="center"}
knitr::include_graphics("fig/rstudio-preferences.png")
```

ウィンドウズと他のオペレーティング・システム間の文字エンコーディングの問題](https://yihui.name/en/2018/11/biggest-regret-knitr/)を避けるため、
、デフォルトでUTF-8を設定します：

```{r, results="markup", fig.cap="Set the default text encoding to UTF-8 to save us headache in the coming future. (Figure from the link above).", echo=FALSE, purl=FALSE, out.width="70%", fig.align="center"}
knitr::include_graphics("fig/utf8.png")
```

### 作業ディレクトリの整理

プロジェクト全体で一貫性のあるフォルダ構造を使うことで、
、整理整頓がしやすくなり、将来的に探し出したりファイルしたりするのも簡単になります。 この
、複数のプロジェクトを抱えているときには特に役立つ。 一般的に、
、\***スクリプト**、\***データ**、\***ドキュメント**用のディレクトリ（フォルダ）を作成することができます。

- **data/**\* このフォルダは、生データと、特定の分析に必要な中間データセット（
  ）を保存するために使用します。
  透明性と
  [出所](https://en.wikipedia.org/wiki/Provenance)のために、
  _常に_ 生データのコピーにアクセスできるようにしておき、
  データのクリーンアップと前処理をできるだけプログラム的に（つまり、手作業ではなく
  スクリプトで）行うべきである。 生データ
  、加工データから切り離すのも良いアイデアだ。 例えば、
  `data/raw/tree_survey.plot1.txt`と`...plot2.txt`のファイルを、
  `scripts/01.preprocess.tree_survey.R`スクリプトによって生成された`data/processed/tree.survey.csv`ファイルとは別に
  。
- **`documents/`** ここは、アウトライン、下書き、
  、その他のテキストを保管する場所になります。
- \*\*scripts/`** (または `src\`) この場所には、さまざまな分析やプロット用の R
  スクリプトを保存し、
  関数用の別フォルダを作成することもできます（詳しくは後述します）。

あなたのプロジェクトの必要性に応じて、追加のディレクトリやサブディレクトリが必要になるかもしれないが、これらはあなたの作業用
ディレクトリのバックボーンを形成するはずである。

```{r, results="markup", fig.cap="Example of a working directory structure.", echo=FALSE, purl=FALSE, out.width="100%", fig.align="center"}
knitr::include_graphics("fig/working-directory-structure.png")
```

このコースでは、生データを保存するために `data/` フォルダが必要です。
、データを
CSV ファイルとしてエクスポートする方法を学ぶために `data_output/` フォルダを使用し、図を保存するために `fig_output/` フォルダを使用します。

:::::::::::::::::::::::::::::::::::::::  challenge

## 課題：プロジェクトのディレクトリ構造を作る

画面右側の`Files`タブで、`New Folder`をクリックし、
、新しく作成した作業ディレクトリー
（例：`~/bioc-intro/data`）の中に`data`という名前のフォルダーを作成します。 (あるいは、Rのコンソール
で `dir.create("data")` とタイプする)。 これらの操作を繰り返して、`data_output/` と
`fig_output` フォルダーを作成する。

::::::::::::::::::::::::::::::::::::::::::::::::::

スクリプトは作業ディレクトリのルート
に置くことにする。使用するのは1つのファイルだけだし、
事が簡単になるからだ。

作業ディレクトリはこのようになっているはずだ：

```{r, results="markup", fig.cap="How it should look like at the beginning of this lesson", echo=FALSE, purl=FALSE, out.width="100%", fig.align="center"}
knitr::include_graphics("fig/r-starting-how-it-should-look-like.png")
```

**プロジェクト管理**は、バイオインフォマティクス・プロジェクトにも適用できる。
[^bioindatascience]。 William Noble (@Noble:2009)は、
以下のディレクトリ構造を提案している：

[^bioindatascience]: このコースでは、バイオインフォマティクスを、
    、生物学的または生物医学的データに適用されるデータサイエンスと考える。

> ディレクトリ名は大きな書体で、ファイル名は小さな
> 。 ここに掲載したのは、その一部である。 なお、
> の日付は、<year>-<month>-<day>`というフォーマットになっているので、
> 時系列順に並べ替えることができる。 ソースコード`src/ms-analysis.c`がコンパイルされて`bin/ms-analysis`が作成され、`doc/ms-analysis.html`に文書化されている。 データ・ディレクトリ
> にある`README`ファイルには、誰がどの URL から
> の日付にデータ・ファイルをダウンロードしたかが明記されている。 ドライバスクリプト`results/2009-01-15/runall`は自動的に
> 3つのサブディレクトリ split1、split2、split3 を生成する。
> は3つのクロスバリデーション分割に対応する。 `bin/parse-sqt.py`スクリプトは`runall\` ドライバ
> スクリプトの両方から呼び出される。

```{r bioinfoproj, fig.cap="Directory structure for a sample bioinformatics project.", out.width="100%", echo=FALSE}
knitr::include_graphics("fig/noble-bioinfo-project.png")
```

よく定義され、よく文書化された
プロジェクトのディレクトリの最も重要な側面は、
プロジェクト[^futureself]をよく知らない人が、次のことをできるようにすることである。

1. どのようなプロジェクトなのか、どのようなデータが入手可能なのか、どのような
   分析が行われ、どのような結果が出たのかを理解すること、そして最も重要なことは、
   を理解することである。

2. 新しいデータで、あるいは
   分析パラメーターの一部を変更して、分析を繰り返す。

[^futureself]: その誰かとは、
    、分析が実行された数カ月後、あるいは数年後に、
    、未来のあなた自身である可能性が高い。

### 作業ディレクトリ

作業ディレクトリは理解すべき重要な概念である。 Rがファイルを探して保存する
。
プロジェクトのコードを書くときは、作業ディレクトリのルート
に関連するファイルを参照し、この
構造内のファイルだけが必要です。

RStudioプロジェクトを使用すると、この作業が簡単になり、
ディレクトリが適切に設定されます。 もし確認する必要があれば、
`getwd()` を使うことができる。 何らかの理由で作業ディレクトリが
のようになっていない場合は、RStudio のインターフェイスで
ファイルブラウザーで作業ディレクトリがあるべき場所に移動し、
青い歯車のアイコン `More` をクリックし、`Set As Working Directory` を選択して変更することができます。
あるいは、`setwd("/path/to/working/directory")`を使って、
作業ディレクトリをリセットすることもできる。 しかし、あなたのスクリプトには、
、この行を含めるべきではありません。なぜなら、他の誰かのコンピューターで失敗してしまうからです。

\*\*例

以下のスキーマは作業ディレクトリ `bioc-intro` と
`data` と `fig_output` のサブディレクトリ、そして後者にある2つのファイルを表しています：

```
bioc-intro/data/
          /fig_output/fig1.pdf
          /fig_output/fig2.png
```

もし作業ディレクトリにいれば、相対パス `bioc-intro/fig_output/fig1.pdf` か、
絶対パス `/home/user/bioc-intro/fig_output/fig1.pdf` を使って `fig1.pdf`
ファイルを参照することができます。

もし `data` ディレクトリにいたとしたら、相対パス
`../fig_output/fig1.pdf` か、同じ絶対パス
`/home/user/bioc-intro/fig_output/fig1.pdf` を使うことになる。

## Rとの対話

プログラミングの基本は、私たちが
、コンピュータが従うべき命令を書き記し、その
命令に従うようコンピュータに指示することである。 私たちがRで命令を書く、つまり_コード_を書くのは、それが
、コンピューターも私たちも理解できる共通言語だからだ。 私たちは
を_コマンド_と呼び、それらのコマンドを_実行_（_実行_とも呼ぶ）することによって、
の指示に従うようにコンピュータに指示する。

Rと対話する主な方法は2つある：
**コンソール**を使う方法と、**スクリプト**（
あなたのコードを含むプレーンテキストファイル）を使う方法である。 コンソールペイン（RStudioでは左下のパネル）は、
、R言語で書かれたコマンドを入力し、
、コンピュータによって即座に実行される場所です。 また、
、実行されたコマンドの結果が表示される場所でもある。 コンソールに直接
コマンドを入力し、`Enter`を押すことで、それらの
コマンドを実行することができますが、セッションを閉じると忘れてしまいます。

コードとワークフローを再現できるようにしたいので、
、スクリプトエディターで必要なコマンドを入力し、
スクリプトを保存する方がよい。 こうすることで、私たちがしたことの完全な記録が残る。
、誰にでも（未来の自分も含めて！）。 は、
の結果を自分のコンピューターで簡単に再現できる。 ただし、スクリプトに
、単にコマンドを入力しただけでは自動的に_実行_されないことに注意してほしい。
、コンソールに送信して実行させる必要がある。

RStudio ではスクリプトエディター
から `Ctrl` + `Enter` ショートカット（Mac では `Cmd` + `Return` で
も可）で直接コマンドを実行できます。 Ctrl`+`Enter\`を押すと、スクリプトの現在の行のコマンド（カーソルで
を示す）、または現在選択されているテキスト
のすべてのコマンドがコンソールに送られ、実行される。 その他のキーボードショートカットはRStudio
cheatsheet about RStudio
IDEを参照してください。

分析のある時点で、
変数の内容やオブジェクトの構造をチェックしたくなるかもしれない。必ずしもスクリプトに
の記録を残しておく必要はない。 これらのコマンドを入力し、コンソールで直接
。  RStudio には `Ctrl` + `1` と
`Ctrl` + `2` のショートカットがあり、スクリプトと
のコンソールペイン間をジャンプすることができます。

Rがコマンドを受け付ける準備ができたら、Rコンソールに `>` プロンプトが表示される。
コマンドを受信すると（タイプ、コピーペースト、またはスクリプト
エディターから `Ctrl` + `Enter` を使って送信）、R はそれを実行しようとします。
準備ができると、結果を表示し、
新しいコマンドを待つために新しい `>` プロンプトで戻ってきます。

Rがまだ
、データの入力を待っている場合は、コンソールに`+`プロンプトが表示されます。 これは、
、完全なコマンドの入力が終わっていないことを意味する。 これは、
、括弧や引用符を「閉じて」いないからです。つまり、
、左括弧と右括弧の数や、
、開閉引用符の数が同じではないからです。  このようなことが起こり、
、コマンドを入力し終わったと思った場合、コンソール
ウィンドウ内をクリックし、`Esc`を押してください。これにより、不完全なコマンドがキャンセルされ、
`>`プロンプトに戻ります。

## コース中やコース終了後にさらに学ぶには？

このコースで扱う内容は、あなた自身の
研究のためにデータを分析するために R をどのように使うことができるかを、
初めに体験していただくものです。 しかし、データセットのクリーニング、統計的手法の使用、
、美しいグラフィックスの作成[^inthiscoure]など、
の高度な操作を行うには、さらに学ぶ必要がある。
Rに習熟し、効率的に使えるようになるための最良の方法は、他のツールと同様、Rを使って
実際の研究課題に取り組むことである。 初心者の場合、ゼロからスクリプトを書かなければならないのは、
困難に感じるかもしれない。
多くの人が自分のコードをオンラインで公開していることを考えると、
自分の目的に合うように既存のコードを修正することで、簡単に始めることができるかもしれない。

[^inthiscoure]: ここでは、これらのほとんど（統計学を除く）
    を紹介するが、Rで可能なこと
    の富の表面をかすめることしかできない。

```{r kitten, results="markup", echo=FALSE, purl=FALSE, out.width="400px", fig.align="center"}
knitr::include_graphics("fig/kitten-try-things.jpg")
```

## 助けを求める

### RStudio 組み込みのヘルプインターフェイスを使用して、R 関数の詳細情報を検索します。

```{r rstudiohelp, fig.cap="RStudio help interface.", results="markup", echo=FALSE, purl=FALSE, out.width="70%", fig.align="center"}
knitr::include_graphics("fig/rstudiohelp.png")
```

RStudio ヘルプ
インターフェイスを使用するのが、ヘルプを得る最も早い方法の1つです。 このパネルはデフォルトで RStudio の右下
パネルにあります。 スクリーンショットに見られるように、
"Mean "という単語を入力すると、RStudioは
、あなたが興味を持ちそうな候補もいくつか出そうとする。 説明文は
ウィンドウに表示される。

### 使いたい関数の名前はわかっているが、その使い方がわからない。

特定の関数、例えば`barplot()`のヘルプが必要な場合は、
：

```{r, eval=FALSE, purl=TRUE}
バープロット
```

引数の名前を思い出す必要がある場合は、次のようにすればよい：

```{r, eval=FALSE, purl=TRUE}
引数(lm)
```

### Xを行う関数を使いたい。そのための関数があるはずだが、どれがあるのかわからない...。

特定のタスクを実行する関数を探している場合は、
`help.search()`関数を使用することができます。この関数は二重の疑問符 \`?
しかし、これはインストールされているパッケージの中から、検索リクエストと
一致するヘルプページを探すだけです。

```{r, eval=FALSE, purl=TRUE}
クルスカル
```

探しているものが見つからない場合は、
[rdocumentation.org](https://www.rdocumentation.org)のウェブサイトを使うことができます。このウェブサイトは、利用可能なすべてのパッケージのヘルプファイルから
を検索します。

最後に、一般的なグーグルやインターネット検索で "R \<task>" を検索すると、多くの場合、
適切なパッケージ・ドキュメントにたどり着くか、
他の誰かがすでに質問している有益なフォーラムにたどり着く。

### 動けないんだ...。 理解できないエラーメッセージが表示されます。

エラーメッセージをググることから始めよう。
というのも、多くの場合、パッケージ開発者はRが提供するエラー・キャッチに依存しているからである。
、一般的なエラー・メッセージが表示されることになるが、これは
の問題を診断するのにあまり役に立たないかもしれない（例えば、"subscript out of bounds"）。 メッセージが非常に一般的なものであれば、
、使用している関数やパッケージの名前を
クエリに含めることもできる。

しかし、Stack Overflowをチェックする必要がある。 r]\`タグを使って検索する。 ほとんどの
の質問にはすでに答えが出されているが、
の答えを見つけるために、検索で適切な
の言葉を使うことが課題である：

[http://stackoverflow.com/questions/tagged/r](https://stackoverflow.com/questions/tagged/r)

R言語入門](https://cran.r-project.org/doc/manuals/R-intro.pdf)
も、プログラミング経験の少ない人にとっては内容が濃いかもしれないが、R言語の基礎を理解するには良い
場所である。

R FAQ](https://cran.r-project.org/doc/FAQ/R-FAQ.html)は密度が濃く、技術的である。
、しかし有用な情報が満載である。

### 助けを求める

誰かに助けてもらうために重要なのは、相手があなたの問題（
）を素早く把握することだ。
、どこに問題がありそうかをできるだけ簡単に特定できるようにすべきだ。

あなたの問題を説明するために、正しい言葉を使うようにしてください。 例えば、
パッケージはライブラリとは違う。 ほとんどの人は、
、あなたが言いたかったことを理解するだろうが、意味の違いについて本当に強い感情を持つ人もいる
。 重要なのは、
、あなたを助けようとする人々を混乱させる可能性があるということだ。
できるだけ正確に問題を説明してください。

可能であれば、うまくいかないことを単純な例（再現可能な
）にまで落とし込むようにする。 もし、あなたが50000行10000列のデータではなく、非常に小さなデータ
フレームを使って問題を再現できるのであれば、
その小さなデータを問題の説明とともに提供してください。 適切な場合には、
、あなたのやっていることを一般化して、
分野に関係のない人でも質問を理解できるようにする。 例えば、
実際のデータセットのサブセットを使う代わりに、
小さな（3列、5行）一般的なものを作成する。 再現可能な
例の書き方については、Hadley
Wickhamによるこの記事を参照のこと。

オブジェクトを他の人と共有するには、それが比較的小さければ、
、関数 `dput()` を使うことができる。
、メモリ上のオブジェクトとまったく同じオブジェクトを再作成するために使用できるRコードが出力される：

```{r, results="show", purl=TRUE}
## irisはRに付属するデータフレームの例であり、 head()はデータフレームの最初の部分を返す
## 関数である
dput(head(iris))
```

オブジェクトのサイズが大きい場合は、生ファイル（つまり、CSV
ファイル）と、エラーが発生した時点までのスクリプト（およびの問題に関係ないものをすべて削除した後のファイル）を提供してください。 あるいは、特にあなたの質問が
データフレームに関連していない場合は、任意のRオブジェクトをファイルに保存することができます[^export]：

```{r, eval=FALSE, purl=FALSE}
saveRDS(iris, file="/tmp/iris.rds")
```

しかし、このファイルの内容は人間が読めるものではないので、
Stack Overflowに直接投稿することはできません。 その代わりに、
。その人は`readRDS()`コマンドでそのファイルを読むことができます（ここでは、
、ダウンロードされたファイルは
、そのユーザーのホームディレクトリの`Downloads`フォルダにあると仮定しています）：

```{r, eval=FALSE, purl=FALSE}
some_data <- readRDS(file="~/Downloads/iris.rds")
```

最後になりますが、**必ず`sessionInfo()`**
の出力を含めるようにしてください。プラットフォーム、使用しているRと
パッケージのバージョン、その他問題を理解するのに非常に役立つ情報を提供してくれるからです。

```{r, results="show", purl=TRUE}
sessionInfo()
```

### どこに助けを求めればいいのか？

- コース中、あなたの隣に座っている人。
  、ワークショップ中に隣の人と話し、自分の答えを比較し、
  、助けを求めることをためらわないでください。
- 友好的な同僚：もしあなたより経験豊富な人を知っていれば、
  、あなたを助けてくれるかもしれない。
- [Stack Overflow](https://stackoverflow.com/questions/tagged/r):
  あなたの質問が過去に回答されたことがなく、よく練られたものであれば、
  5分以内に回答が得られる可能性があります。
  How to ask good
  questionのガイドラインに従うことを忘れずに。
- R-helpメーリングリスト
  ](https://stat.ethz.ch/mailman/listinfo/r-help):
  多くの人に読まれていて（Rコアチームのほとんどを含む）、多くの人が
  投稿していますが、口調はかなり辛口で、
  新しいユーザーを必ずしも歓迎しているとは限りません。 あなたの質問が正当なものであれば、
  、すぐに回答が返ってくる可能性が高いが、
  、スマイルマーク付きで返ってくるとは思わないこと。 また、ここでは他のどこよりも、
  正しい語彙を使うようにしましょう（そうしないと、
  の質問に答えるのではなく、
  あなたの言葉の誤用を指摘する答えが返ってくるかもしれません）。 また、質問内容が特定のパッケージではなく、
  ベースとなる関数に関するものであれば、より成功しやすいでしょう。
- 質問が特定のパッケージに関するものであれば、そのパッケージのメーリングリスト(
  )があるかどうか確認してください。 通常は
  `packageDescription("name-of-package")` を使ってアクセスできるパッケージのDESCRIPTIONファイル
  に含まれています。 また、
  そのパッケージの作者に直接メールを送ってみたり、
  コードリポジトリ（例：GitHub）にissueを開いてみるのもよいだろう。
- また、トピックに特化したメーリングリスト（GIS、
  系統遺伝学など）もある。全リストは
  [こちら](https://www.r-project.org/mail.html)。

### その他のリソース

- Rメーリングリストの[投稿ガイド](https://www.r-project.org/posting-guide.html)。

- How to ask for R
  help
  役立つガイドライン。

- Jon
  Skeetによるこのブログ記事
  プログラミングの質問の仕方について、かなり包括的なアドバイスがある。

- reprex](https://cran.rstudio.com/web/packages/reprex/)パッケージ
  は、
  ヘルプを求めるときに、再現可能な例を作成するのに非常に役立ちます。
  rOpenSciコミュニティコール "How to ask questions so they get answered" (Github
  link and video
  recording) には、
  reprexパッケージとその哲学のプレゼンテーションが含まれています。

## Rパッケージ

### 荷物の積み込み

上で見てきたように、RパッケージはRの基本的な役割を担っている。
、パッケージがインストールされていることを前提に、パッケージの機能を利用する。
、それを利用できるようにするには、まずパッケージをロードする必要がある。 これは
`library()`関数で行う。 以下に `ggplot2` をロードする。

```{r loadp, eval=FALSE, purl=TRUE}
library("ggplot2")
```

### パッケージのインストール

デフォルトのパッケージリポジトリは The _Comprehensive R Archive
Network_ (CRAN) で、CRAN で利用可能なパッケージは `install.packages()` 関数で
インストールできます。 例えば、
、後で説明する `dplyr` パッケージをインストールする。

```{r craninstall, eval=FALSE, purl=TRUE}
install.packages("dplyr")
```

このコマンドは、`dplyr` パッケージと、その
依存パッケージ、つまり、そのパッケージが機能するために依存しているすべてのパッケージをインストールします。

もう一つの主要なRパッケージのリポジトリは、Bioconductorによって管理されている。 [Bioconductorパッケージ](https://bioconductor.org/packages/release/BiocViews.html#___Software) は、専用のパッケージ、
すなわち `BiocManager` を使用して管理およびインストールされます。

```{r, eval=FALSE, purl=TRUE}
install.packages("BiocManager")
```

SummarizedExperiment`（後で
）、`DESeq2`（RNA-Seq解析用）、その他BioconductorやCRANにあるパッケージは、`BiocManager::install\`で
。

```{r, eval=FALSE, purl=TRUE}
BiocManager::install("SummarizedExperiment")
BiocManager::install("DESeq2")
```

デフォルトでは、`BiocManager::install()` はインストールされているすべてのパッケージをチェックし、新しいバージョンがあるかどうかも確認します。 もしあれば、それが表示され、「すべて/いくつか/なしを更新しますか？ [a/s/n]:\`、そしてあなたの答えを待つ。 パッケージのバージョンは最新のものを用意するよう努力すべきですが、実際には、パッケージがロードされる前の新鮮なRセッションでのみパッケージを更新することをお勧めします。

:::::::::::::::::::::::::::::::::::::::: keypoints

- RとRStudioを使い始める

::::::::::::::::::::::::::::::::::::::::::::::::::
