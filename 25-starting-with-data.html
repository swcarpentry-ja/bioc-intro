<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="ja" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Introduction to data analysis with R and Bioconductor: データから始める</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">本文へ移動</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo.svg"></div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> 学習者表示 <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/25-starting-with-data.html';">インストラクター表示</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="メインナビゲーション"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="ナビゲーションの切り替え">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">メニュー</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Introduction to data analysis with R and Bioconductor
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="オールインワンページで検索" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Introduction to data analysis with R and Bioconductor
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">まとめ</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">用語集</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">学習者プロフィール</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            その他 <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="reference.html"></a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="オールインワンページで検索"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="オールインワンページで検索">オールインワンページで検索</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Introduction to data analysis with R and Bioconductor
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 33%" class="percentage">
    33%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 33%" aria-valuenow="33" aria-label="レッスンの進捗状況" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="メニューを閉じる" alt="メニューを閉じる" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="折りたたむ " data-episodes="エピソード ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> 学習者表示
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/25-starting-with-data.html">インストラクター表示</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  エピソード
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">概要とセットアップ</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="10-data-organisation.html">1. スプレッドシートを使用したデータ整理</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="20-r-rstudio.html">2. RとRStudio</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="23-starting-with-r.html">3. R の紹介</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        4. データから始める
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#%E9%81%BA%E4%BC%9D%E5%AD%90%E7%99%BA%E7%8F%BE%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E3%83%97%E3%83%AC%E3%82%BC%E3%83%B3%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3">遺伝子発現データのプレゼンテーション</a></li>
<li><a href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%81%A8%E3%81%AF">データフレームとは？</a></li>
<li><a href="#data.frame-%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E6%A4%9C%E6%9F%BB">data.frame` オブジェクトの検査</a></li>
<li><a href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%81%AE%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E5%8C%96%E3%81%A8%E3%82%B5%E3%83%96%E3%82%BB%E3%83%83%E3%83%88%E5%8C%96">データフレームのインデックス化とサブセット化</a></li>
<li><a href="#%E8%A6%81%E5%9B%A0">要因</a></li>
<li><a href="#%E3%83%9E%E3%83%88%E3%83%AA%E3%83%83%E3%82%AF%E3%82%B9">マトリックス</a></li>
<li><a href="#%E6%97%A5%E4%BB%98%E3%81%AE%E6%9B%B8%E5%BC%8F%E8%A8%AD%E5%AE%9A">日付の書式設定</a></li>
<li><a href="#r%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E6%A6%82%E8%A6%81">Rオブジェクトの概要</a></li>
<li><a href="#%E3%83%AA%E3%82%B9%E3%83%88">リスト</a></li>
<li><a href="#sec:exportandsave">表形式データのエクスポートと保存</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="30-dplyr.html">5. dplyrによるデータの操作と分析</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="40-visualization.html">6. データの可視化</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="60-next-steps.html">7. 次のステップ</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    資料
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">まとめ</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">用語集</a>
                      </li>
                      <li>
                        <a href="profiles.html">学習者プロフィール</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li><li><a href="reference.html"></a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width resources"><a href="aio.html">一つにまとまったページ</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="前の章と次の章"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="23-starting-with-r.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>前へ</a>
        <a class="chapter-link float-end" href="30-dplyr.html">次へ<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="23-starting-with-r.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          前へ: R の紹介
        </a>
        <a class="chapter-link float-end" href="30-dplyr.html" rel="next">
          次へ: dplyrによるデータの操作と分析...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>データから始める</h1>
        <p>最終更新日：2024-09-08 |

        <a href="https://github.com/carpentries-incubator/bioc-intro/edit/main/episodes/25-starting-with-data.Rmd" class="external-link">ページの編集 <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="回答を全て表示する " data-collapse="回答を全て折りたたむ "> 回答を全て表示する <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">概要</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">質問</h3>
<ul><li>Rによる最初のデータ分析</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">目的</h3>
<ul><li>
<code>data.frame</code> が何なのか説明してみましょう。</li>
<li>.csv ファイルからデータ
フレームに外部データを読み込みましょう。</li>
<li>データフレームの内容を要約してみましょう。</li>
<li>ファクターとは何か？</li>
<li>string と factor を変換してみましょう。</li>
<li>factor の並び替えとリネームを行ってみましょう。</li>
<li>日付をフォーマットしてみましょう。</li>
<li>データをエクスポートして保存してみましょう。</li>
</ul></div>
</div>
</div>
</div>
</div>
<blockquote>
<p>このエピソードは、Data Carpentriesの_Data Analysis and Visualisation
in R for Ecologists_レッスンに基づいています。</p>
</blockquote>
<section><h2 class="section-heading" id="遺伝子発現データのプレゼンテーション">遺伝子発現データのプレゼンテーション<a class="anchor" aria-label="アンカー" href="#%E9%81%BA%E4%BC%9D%E5%AD%90%E7%99%BA%E7%8F%BE%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E3%83%97%E3%83%AC%E3%82%BC%E3%83%B3%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3"></a>
<a class="anchor" aria-label="anchor" href="#%E9%81%BA%E4%BC%9D%E5%AD%90%E7%99%BA%E7%8F%BE%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E3%83%97%E3%83%AC%E3%82%BC%E3%83%B3%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3"></a></h2>
<hr class="half-width"><p>Blackmore <em>et al.</em> (2017)](<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5544260/" class="external-link uri">https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5544260/</a>),
<em>The effect of upper-respiratory infection on transcriptomic changes
in CNS</em> によって発表されたデータの一部を使用する予定である。
研究の目的は、 上部呼吸器感染症が、感染後の小脳と脊髄で
起こるRNA転写の変化に及ぼす影響を調べることであった。
性別を一致させた8匹の 週齢のC57BL/6マウスに、生理食塩水または
鼻腔内経路でインフルエンザAを接種し、0日目
（非感染）、4日目、8日目に小脳と
脊髄組織におけるトランスクリプトーム変化をRNA-seqで評価した。</p>
<p>データセットは、カンマ区切りの値（CSV）ファイルとして保存される。
各行 は1つのRNA発現測定の情報を持ち、最初の11列 はそれを表している：</p>
<table class="table"><colgroup><col width="9%"><col width="90%"></colgroup><thead><tr><th>コラム</th>
<th>説明</th>
</tr></thead><tbody><tr><td>遺伝子</td>
<td>測定された遺伝子名</td>
</tr><tr><td>サンプル</td>
<td>遺伝子発現を測定したサンプル名</td>
</tr><tr><td>表現</td>
<td>遺伝子発現の値</td>
</tr><tr><td>有機体</td>
<td>生物／種 - ここではすべてのデータはマウスに由来する</td>
</tr><tr><td>年齢</td>
<td>マウスの年齢（ここではすべてのマウスが8週齢であった）</td>
</tr><tr><td>セックス</td>
<td>マウスの性別</td>
</tr><tr><td>感染症</td>
<td>マウスの感染状態、すなわちA型インフルエンザに感染しているか、感染していないか。</td>
</tr><tr><td>緊張</td>
<td>インフルエンザA型。</td>
</tr><tr><td>時間</td>
<td>感染期間（日単位）。</td>
</tr><tr><td>組織</td>
<td>遺伝子発現実験に使用した組織、すなわち小脳または脊髄。</td>
</tr><tr><td>マウス</td>
<td>マウス固有の識別子。</td>
</tr></tbody></table><p>R関数の<code>download.file()</code>を使って遺伝子発現データを含む
CSVファイルをダウンロードし、 <code>read.csv()</code>
を使ってCSVファイルの内容を
<code>data.frame</code>クラスのオブジェクトとしてメモリにロードする。
download.file<code>コマンドの内部では、 の最初のエントリーは、ソースURLの文字列である。 このソースURL はGitHubリポジトリからCSVファイルをダウンロードします。  、カンマ（</code>“data/rnaseq.csv”<code>）の後のテキストは、 、ローカルマシン上のファイルの保存先です。 あなたのマシンに</code>“data”<code>というフォルダを用意し、そこにファイルをダウンロードする必要があります。 そこで、このコマンドは リモートファイルをダウンロードし、</code>“rnaseq.csv”<code>という名前を付けて、</code>“data”`
という名前の フォルダに追加する。</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">download.file</span><span class="op">(</span>url <span class="op">=</span> <span class="st">"https://github.com/carpentries-incubator/bioc-intro/raw/main/episodes/data/rnaseq.csv"</span>,</span>
<span>              destfile <span class="op">=</span> <span class="st">"data/rnaseq.csv"</span><span class="op">)</span></span></code></pre>
</div>
<p>これでデータをロードする準備ができた：</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rna</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span><span class="st">"data/rnaseq.csv"</span><span class="op">)</span></span></code></pre>
</div>
<p>、代入は何も表示しないからだ。
、データがロードされたことを確認したい場合は、
、その名前をタイプすることでデータフレームの中身を見ることができる：</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">RNA</span></span></code></pre>
</div>
<p>うわぁ…。 多くのアウトプットがあった。 少なくとも、 。 関数
<code>head()</code> を使って、このデータ・フレーム
の先頭（最初の6行）をチェックしてみよう：</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">rna</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">出力<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     gene     sample expression     organism age    sex  infection  strain time
1     Asl GSM2545336       1170 Mus musculus   8 Female InfluenzaA C57BL/6    8
2    Apod GSM2545336      36194 Mus musculus   8 Female InfluenzaA C57BL/6    8
3 Cyp2d22 GSM2545336       4060 Mus musculus   8 Female InfluenzaA C57BL/6    8
4    Klk6 GSM2545336        287 Mus musculus   8 Female InfluenzaA C57BL/6    8
5   Fcrls GSM2545336         85 Mus musculus   8 Female InfluenzaA C57BL/6    8
6  Slc2a4 GSM2545336        782 Mus musculus   8 Female InfluenzaA C57BL/6    8
      tissue mouse ENTREZID
1 Cerebellum    14   109900
2 Cerebellum    14    11815
3 Cerebellum    14    56448
4 Cerebellum    14    19144
5 Cerebellum    14    80891
6 Cerebellum    14    20528
                                                                       product
1                               argininosuccinate lyase, transcript variant X1
2                                       apolipoprotein D, transcript variant 3
3 cytochrome P450, family 2, subfamily d, polypeptide 22, transcript variant 2
4                         kallikrein related-peptidase 6, transcript variant 2
5                Fc receptor-like S, scavenger receptor, transcript variant X1
6          solute carrier family 2 (facilitated glucose transporter), member 4
     ensembl_gene_id external_synonym chromosome_name   gene_biotype
1 ENSMUSG00000025533    2510006M18Rik               5 protein_coding
2 ENSMUSG00000022548             &lt;NA&gt;              16 protein_coding
3 ENSMUSG00000061740             2D22              15 protein_coding
4 ENSMUSG00000050063             Bssp               7 protein_coding
5 ENSMUSG00000015852    2810439C17Rik               3 protein_coding
6 ENSMUSG00000018566           Glut-4              11 protein_coding
                            phenotype_description
1           abnormal circulating amino acid level
2                      abnormal lipid homeostasis
3                        abnormal skin morphology
4                         abnormal cytokine level
5 decreased CD8-positive alpha-beta T cell number
6              abnormal circulating glucose level
  hsapiens_homolog_associated_gene_name
1                                   ASL
2                                  APOD
3                                CYP2D6
4                                  KLK6
5                                 FCRL2
6                                SLC2A4</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##</span></span>
<span><span class="co">## View(rna)も試してみる。</span></span></code></pre>
</div>
<p><strong>注</strong>*。</p>
<p>read.csv()<code>は、フィールドがカンマで区切られていると仮定しているが、 いくつかの国では、カンマは小数の区切り文字として使用され、 セミコロン（;）はフィールドの区切り文字として使用される。 Rでこの種のファイルを 、</code>read.csv2()<code>関数を使うことができる。</code>read.csv()<code>と全く同じ動作をするが、 小数とフィールドのセパレーターに異なるパラメーターを使用する。 別の フォーマットを使用している場合は、ユーザーが両方指定することができます。 詳しくは、</code>read.csv()<code>のヘルプを</code>?read.csv<code>と入力して確認してください。 また、</code>read.delim()<code>関数があり、タブ区切りのデータファイルを読み込むことができる。  重要なことは、これらの関数はすべて、 メインの</code>read.table()<code>関数に異なる引数を指定するためのラッパー関数であるということです。  そのため、 上のデータは、</code>read.table()<code>、区切りの引数を</code>,`
にしてロードすることもできた。 コードは以下の通り：</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rna</span> <span class="op">&lt;-</span> <span class="fu">read.table</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/rnaseq.csv"</span>,</span>
<span>                  sep <span class="op">=</span> <span class="st">","</span>,</span>
<span>                  header <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<p>デフォルトでは <code>read.table()</code> の header 引数は FALSE
に設定されているので、 のヘッダーを読むためには header 引数を TRUE
に設定しなければならない。</p>
</section><section><h2 class="section-heading" id="データフレームとは">データフレームとは？<a class="anchor" aria-label="アンカー" href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%81%A8%E3%81%AF"></a>
<a class="anchor" aria-label="anchor" href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%81%A8%E3%81%AF"></a></h2>
<hr class="half-width"><p>データ・フレームは、ほとんどの表データ、
、統計やプロットに使われる_事実上の_データ構造である。</p>
<p>データフレームは手作業で作成することもできますが、最も一般的なのは、関数
<code>read.csv()</code> や <code>read.table()</code> によって生成される
データフレームです。</p>
<p>データフレームとは、
、列がすべて同じ長さのベクトルである表の形式でデータを表現したものである。
、列はベクトルであるため、各列は1種類のデータ
（文字、整数、因子など）を含まなければならない。 例えば、 、数値、文字、
論理ベクトルからなるデータフレームを示す図である。</p>
<figure><img src="./fig/data-frame.svg" class="figure mx-auto d-block"></figure><p>str()`という関数で ：</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">rna</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">出力<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	32428 obs. of  19 variables:
 $ gene                                 : chr  "Asl" "Apod" "Cyp2d22" "Klk6" ...
 $ sample                               : chr  "GSM2545336" "GSM2545336" "GSM2545336" "GSM2545336" ...
 $ expression                           : int  1170 36194 4060 287 85 782 1619 288 43217 1071 ...
 $ organism                             : chr  "Mus musculus" "Mus musculus" "Mus musculus" "Mus musculus" ...
 $ age                                  : int  8 8 8 8 8 8 8 8 8 8 ...
 $ sex                                  : chr  "Female" "Female" "Female" "Female" ...
 $ infection                            : chr  "InfluenzaA" "InfluenzaA" "InfluenzaA" "InfluenzaA" ...
 $ strain                               : chr  "C57BL/6" "C57BL/6" "C57BL/6" "C57BL/6" ...
 $ time                                 : int  8 8 8 8 8 8 8 8 8 8 ...
 $ tissue                               : chr  "Cerebellum" "Cerebellum" "Cerebellum" "Cerebellum" ...
 $ mouse                                : int  14 14 14 14 14 14 14 14 14 14 ...
 $ ENTREZID                             : int  109900 11815 56448 19144 80891 20528 97827 118454 18823 14696 ...
 $ product                              : chr  "argininosuccinate lyase, transcript variant X1" "apolipoprotein D, transcript variant 3" "cytochrome P450, family 2, subfamily d, polypeptide 22, transcript variant 2" "kallikrein related-peptidase 6, transcript variant 2" ...
 $ ensembl_gene_id                      : chr  "ENSMUSG00000025533" "ENSMUSG00000022548" "ENSMUSG00000061740" "ENSMUSG00000050063" ...
 $ external_synonym                     : chr  "2510006M18Rik" NA "2D22" "Bssp" ...
 $ chromosome_name                      : chr  "5" "16" "15" "7" ...
 $ gene_biotype                         : chr  "protein_coding" "protein_coding" "protein_coding" "protein_coding" ...
 $ phenotype_description                : chr  "abnormal circulating amino acid level" "abnormal lipid homeostasis" "abnormal skin morphology" "abnormal cytokine level" ...
 $ hsapiens_homolog_associated_gene_name: chr  "ASL" "APOD" "CYP2D6" "KLK6" ...</code></pre>
</div>
</section><section><h2 class="section-heading" id="data-frame-オブジェクトの検査">data.frame` オブジェクトの検査<a class="anchor" aria-label="アンカー" href="#data.frame-%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E6%A4%9C%E6%9F%BB"></a>
<a class="anchor" aria-label="anchor" href="#data-frame-%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E6%A4%9C%E6%9F%BB"></a></h2>
<hr class="half-width"><p>関数 <code>head()</code> と <code>str()</code> が、
データフレームの内容と構造をチェックするのに便利であることは、すでに説明した。
以下は、 データの内容／構造を知るための、 非網羅的な機能のリストである。
試してみよう！</p>
<p>**サイズ</p>
<ul><li>dim(rna)` - 行数を最初の 要素とし、列数を2番目の要素（オブジェクトの
<strong>dim</strong>ensions ）とするベクトルを返す。</li>
<li>nrow(rna)` - 行の数を返す。</li>
<li>ncol(rna)` - 列数を返す。</li>
</ul><p>**内容</p>
<ul><li>head(rna)` - 最初の6行を表示する。</li>
<li>tail(rna)` - 最後の6行を表示する。</li>
</ul><p><strong>名前</strong>：</p>
<ul><li>names(rna)<code>- 列名を返す（</code>data.frame<code>オブジェクトの</code>colnames()`
と同義）。</li>
<li>rownames(rna)` - 行の名前を返す。</li>
</ul><p><strong>要約</strong>：</p>
<ul><li>str(rna)` - オブジェクトの構造と、
クラス、各カラムの長さと内容に関する情報。</li>
<li>
<code>summary(rna)</code> - 各カラムの要約統計量。</li>
</ul><p>注：これらの関数のほとんどは
“ジェネリック”であり、<code>data.frame</code>以外の
オブジェクトにも使用できます。</p>
<div id="チャレンジだ" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="チャレンジだ" class="callout-inner">
<h3 class="callout-title">チャレンジだ：<a class="anchor" aria-label="アンカー" href="#%E3%83%81%E3%83%A3%E3%83%AC%E3%83%B3%E3%82%B8%E3%81%A0"></a>
</h3>
<div class="callout-content">
<p>str(rna)`の出力に基づいて、以下の の質問に答えられるか？</p>
<ul><li>オブジェクト <code>rna</code> のクラスは何ですか？</li>
<li>このオブジェクトにはいくつの行といくつの列がありますか？</li>
</ul></div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  ソリューション
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<ul><li>クラス: データ・フレーム</li>
<li>行数：66465、列数：11：11</li>
</ul></div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="データフレームのインデックス化とサブセット化">データフレームのインデックス化とサブセット化<a class="anchor" aria-label="アンカー" href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%81%AE%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E5%8C%96%E3%81%A8%E3%82%B5%E3%83%96%E3%82%BB%E3%83%83%E3%83%88%E5%8C%96"></a>
<a class="anchor" aria-label="anchor" href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%81%AE%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E5%8C%96%E3%81%A8%E3%82%B5%E3%83%96%E3%82%BB%E3%83%83%E3%83%88%E5%8C%96"></a></h2>
<hr class="half-width"><p>rna`データフレームには行と列がある（2次元ある）。
、そこから特定のデータを抽出したい場合は、
「座標」を指定する必要がある。 行番号が最初に来て、 列番号がそれに続く。
しかし、これらの
座標を指定する方法が異なれば、異なるクラスの結果が得られることに注意されたい。</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># データフレームの1列目の最初の要素（ベクトルとして）</span></span>
<span><span class="va">rna</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span></span>
<span><span class="co"># 6列目の最初の要素（ベクトルとして）</span></span>
<span><span class="va">rna</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">6</span><span class="op">]</span></span>
<span><span class="co"># データフレームの1列目の要素（ベクトルとして）</span></span>
<span><span class="va">rna</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span></span>
<span><span class="co"># データフレームの1列目の要素（data.フレームとして）</span></span>
<span><span class="va">rna</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="co"># 7列目の最初の3要素（ベクトルとして）</span></span>
<span><span class="va">rna</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">7</span><span class="op">]</span></span>
<span><span class="co"># データフレームの3行目（data.frameとして）</span></span>
<span><span class="va">rna</span><span class="op">[</span><span class="fl">3</span>, <span class="op">]</span></span>
<span><span class="co"># head_rna &lt;- head(rna)</span></span>
<span><span class="va">head_rna</span> <span class="op">&lt;-</span> <span class="va">rna</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, <span class="op">]</span></span>
<span><span class="va">head_rna</span></span></code></pre>
</div>
<p>1:10<code>と</code>10:1`は の例で、
の増加または減少の順序で整数の数値ベクトルを作成する特別な関数である。
<a href="mailto:%E8%A9%B3%E3%81%97%E3%81%8F%E3%81%AF@ref" class="email">詳しくは@ref</a>(sec:genvec)を参照のこと。</p>
<p>また、「<code>-</code>」記号を使ってデータフレームの特定のインデックスを除外することもできる：</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rna</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span> <span class="co">## 最初の列を除いたデータフレーム全体</span></span>
<span><span class="va">rna</span><span class="op">[</span><span class="op">-</span><span class="fu">c</span><span class="op">(</span><span class="fl">7</span><span class="op">:</span><span class="fl">66465</span><span class="op">)</span>, <span class="op">]</span> <span class="co">## head(rna)と等価</span></span></code></pre>
</div>
<p>データフレームは、インデックス（前に示したように）や
、列名を直接呼び出してサブセットすることもできる：</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>rna[<span class="st">"gene"</span>] <span class="co"># Result is a data.frame</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>rna[, <span class="st">"gene"</span>] <span class="co"># Result is a vector</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>rna[[<span class="st">"gene"</span>]].     <span class="co"># 結果はベクトル</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>rna<span class="sc">$</span>gene          <span class="co"># 結果はベクトル</span></span></code></pre>
</div>
<p>RStudio では、オートコンプリート機能を使用して、列の完全で
正しい名前を取得できます。</p>
<div id="チャレンジ" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="チャレンジ" class="callout-inner">
<h3 class="callout-title">チャレンジ<a class="anchor" aria-label="アンカー" href="#%E3%83%81%E3%83%A3%E3%83%AC%E3%83%B3%E3%82%B8"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal"><li><p>データセット <code>rna</code> の 行 200 番目のデータのみを含む
<code>data.frame</code> (<code>rna_200</code>) を作成する。</p></li>
<li><p>nrow()<code>が</code>data.frame`の行数を示していることに気づいただろうか？</p></li>
</ol><ul><li><p>この数字を使って、最初の
<code>rna</code>データフレームの最後の行だけを取り出す。</p></li>
<li><p>tail()`を使った最後の行と比較し、
、期待に応えていることを確認する。</p></li>
<li><p>行番号の代わりに <code>nrow()</code>
を使って最後の行を取り出す。</p></li>
<li><p>最後の行から新しいデータフレーム（<code>rna_last</code>）を作成する。</p></li>
</ul><ol start="3" style="list-style-type: decimal"><li><p><code>rna</code> データフレームの中央にある行を抽出するには
<code>nrow()</code> を使用する。 この行の内容をオブジェクト
<code>rna_middle</code> に格納する。</p></li>
<li><p>nrow()<code>と上記の</code>-<code>表記を組み合わせると、rnaデータセットの1行目から6行目までの      行だけを保持し、</code>head(rna)`の
挙動を再現することができる。</p></li>
</ol></div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  ソリューション
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## 1.</span></span>
<span><span class="va">rna_200</span> <span class="op">&lt;-</span> <span class="va">rna</span><span class="op">[</span><span class="fl">200</span>, <span class="op">]</span></span>
<span><span class="co">## 2.</span></span>
<span><span class="co">## Saving `n_rows` to improve readability and reduce duplication</span></span>
<span><span class="va">n_rows</span> <span class="op">&lt;-</span> <span class="fu">nrow</span><span class="op">(</span><span class="va">rna</span><span class="op">)</span></span>
<span><span class="va">rna_last</span> <span class="op">&lt;-</span> <span class="va">rna</span><span class="op">[</span><span class="va">n_rows</span>, <span class="op">]</span></span>
<span><span class="co">## 3.</span></span>
<span><span class="va">rna_middle</span> <span class="op">&lt;-</span> <span class="va">rna</span><span class="op">[</span><span class="va">n_rows</span> <span class="op">/</span> <span class="fl">2</span>, <span class="op">]</span></span>
<span><span class="co">## 4.</span></span>
<span><span class="va">rna_head</span> <span class="op">&lt;-</span> <span class="va">rna</span><span class="op">[</span><span class="op">-</span><span class="op">(</span><span class="fl">7</span><span class="op">:</span><span class="va">n_rows</span><span class="op">)</span>, <span class="op">]</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="要因">要因<a class="anchor" aria-label="アンカー" href="#%E8%A6%81%E5%9B%A0"></a>
<a class="anchor" aria-label="anchor" href="#%E8%A6%81%E5%9B%A0"></a></h2>
<hr class="half-width"><p>要因は<strong>カテゴリーデータ</strong>を表す。 これらは、
ラベルに関連付けられた整数として格納され、順序付けされたものであっても、順序付けされていないものであってもよい。
因子は文字ベクトルのように見える（そしてしばしば振舞う）が、
、実際にはRでは整数ベクトルとして扱われる。そのため、文字列として扱う場合は非常に
注意する必要がある。</p>
<p>いったん作成されたファクターは、あらかじめ定義された値のセット（
、_レベル_として知られている）しか含むことができない。
デフォルトでは、Rは常にレベルをアルファベット順（ ）でソートする。
例えば、2つのレベルを持つ因子があるとする：</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">セックス</span> <span class="op">&lt;-</span> <span class="fu">factor</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">"male"</span>, <span class="st">"female"</span>, <span class="st">"female"</span>, <span class="st">"male"</span>, <span class="st">"female"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Rは<code>1</code>をレベル<code>"female"</code>に、<code>2</code>をレベル
<code>"male"</code>に割り当てる（このベクトルの最初の要素
が<code>"male"</code>であるにもかかわらず、<code>f</code>が<code>m</code>の前に来るため）。
これは、 <code>levels()</code>
という関数を使うことで見ることができ、<code>nlevels()</code>
を使えばレベル数を知ることができる：</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">levels</span><span class="op">(</span><span class="va">sex</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'sex' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">nlevels</span><span class="op">(</span><span class="va">sex</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'sex' not found</code></pre>
</div>
<p>要因の順番が重要でない場合もあるが、 、意味がある（例えば、“low”、
“medium”、“high”）、視覚化が向上する、または特定のタイプの分析で必要である（
）ため、順番を指定したい場合もある。 ここで、
<code>sex</code>ベクトルでレベルを並べ替える一つの方法は次のようになる：</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sex</span> <span class="co">## current order</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'sex' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sex</span> <span class="op">&lt;-</span> <span class="fu">factor</span><span class="op">(</span><span class="va">sex</span>, levels <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"male"</span>, <span class="st">"female"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'sex' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sex</span> <span class="co">## after re-ordering</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'sex' not found</code></pre>
</div>
<p>Rの記憶では、これらの因子は整数(1, 2, 3)、 で表現されるが、因子は自己
を記述するため、整数よりも情報量が多い。<code>"女性"</code>、<code>"男性"</code>は<code>1</code>、
<code>2</code>よりも説明的である。 どちらが “男性”ですか？<br>
の整数データだけではわからないだろう。
一方、ファクターはこの情報を内蔵している。
特に、レベルが多い場合（例のデータセットの
遺伝子バイオタイプのような）に便利である。</p>
<p>データが因子として格納されているとき、各因子レベルによって表現されるオブザベーションの数
を素早く見るために、 <code>plot()</code> 関数を使うことができます。
データ中の男性 、女性の数を見てみよう。</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">プロット</span><span class="op">(</span><span class="va">性</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in プロット(性): could not find function "プロット"</code></pre>
</div>
<div class="section level3">
<h3 id="文字への変換">文字への変換<a class="anchor" aria-label="anchor" href="#%E6%96%87%E5%AD%97%E3%81%B8%E3%81%AE%E5%A4%89%E6%8F%9B"></a></h3>
<p>因数を文字ベクトルに変換する必要がある場合は、
<code>as.character(x)</code>.</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">as.character</span><span class="op">(</span><span class="va">性</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object '性' not found</code></pre>
</div>
<!-- ### Numeric factors -->
<!-- Converting factors where the levels appear as numbers (such as -->
<!-- concentration levels, or years) to a numeric vector is a little -->
<!-- trickier. The `as.numeric()` function returns the index values of the -->
<!-- factor, not its levels, so it will result in an entirely new (and -->
<!-- unwanted in this case) set of numbers.  One method to avoid this is to -->
<!-- convert factors to characters, and then to numbers.  Another method is -->
<!-- to use the `levels()` function. Compare: -->
<!-- ```{r} -->
<!-- year_fct <- factor(c(1990, 1983, 1977, 1998, 1990)) -->
<!-- as.numeric(year_fct)  ## Wrong! And there is no warning... -->
<!-- as.numeric(as.character(year_fct)) ## Works... -->
<!-- as.numeric(levels(year_fct))[year_fct] ## The recommended way. -->
<!-- ```

<!-- Notice that in the `levels()` approach, three important steps occur: -->
<!-- * We obtain all the factor levels using `levels(year_fct)` -->
<!-- * We convert these levels to numeric values using `as.numeric(levels(year_fct))` -->
<!-- * We then access these numeric values using the underlying integers of the -->
<!--   vector `year_fct` inside the square brackets -->
</div>
<div class="section level3">
<h3 id="要因の名称変更">要因の名称変更<a class="anchor" aria-label="anchor" href="#%E8%A6%81%E5%9B%A0%E3%81%AE%E5%90%8D%E7%A7%B0%E5%A4%89%E6%9B%B4"></a></h3>
<p>これらのファクターの名前を変えたい場合は、 ：</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">levels</span><span class="op">(</span><span class="va">sex</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'sex' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">levels</span><span class="op">(</span><span class="va">sex</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'sex' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sex</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'sex' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plot</span><span class="op">(</span><span class="va">sex</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'sex' not found</code></pre>
</div>
<div id="チャレンジだ-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="チャレンジだ-1" class="callout-inner">
<h3 class="callout-title">チャレンジだ：<a class="anchor" aria-label="アンカー" href="#%E3%83%81%E3%83%A3%E3%83%AC%E3%83%B3%E3%82%B8%E3%81%A0-1"></a>
</h3>
<div class="callout-content">
<ul><li>F “と”M “の名前をそれぞれ”Female “と”Male “に変更する。</li>
</ul></div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  ソリューション
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">levels</span><span class="op">(</span><span class="va">sex</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'sex' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">levels</span><span class="op">(</span><span class="va">sex</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Male"</span>, <span class="st">"Female"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'sex' not found</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="チャレンジだ-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="チャレンジだ-2" class="callout-inner">
<h3 class="callout-title">チャレンジだ：<a class="anchor" aria-label="アンカー" href="#%E3%83%81%E3%83%A3%E3%83%AC%E3%83%B3%E3%82%B8%E3%81%A0-2"></a>
</h3>
<div class="callout-content">
<p>read.csv()<code>を使ってデータフレームを作成する方法を見てきましたが、</code>data.frame()<code>関数を使って手作業で作成することもできます。 この手作りの</code>data.frame`にはいくつか間違いがある。
、それを見つけて修正することはできますか？
実験することをためらってはいけない！</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a>animal_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a>       <span class="at">animal =</span> <span class="fu">c</span>(dog, cat, sea cucumber, sea nurchin),</span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a>       <span class="at">feel =</span> <span class="fu">c</span>(<span class="st">"furry"</span>, <span class="st">"squishy"</span>, <span class="st">"spiny"</span>),</span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a>       <span class="at">weight =</span> <span class="fu">c</span>(<span class="dv">45</span>, <span class="dv">8</span> <span class="fl">1.1</span>, <span class="fl">0.8</span>))</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  ソリューション
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<ul><li>動物の名前の周りに引用符がない</li>
<li>“feel”欄に1つ記入がない（おそらく毛皮の動物の1つ）。</li>
<li>体重欄のコンマが1つ足りない</li>
</ul></div>
</div>
</div>
</div>
<div id="チャレンジだ-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="チャレンジだ-3" class="callout-inner">
<h3 class="callout-title">チャレンジだ：<a class="anchor" aria-label="アンカー" href="#%E3%83%81%E3%83%A3%E3%83%AC%E3%83%B3%E3%82%B8%E3%81%A0-3"></a>
</h3>
<div class="callout-content">
<p>次の の例で、各列のクラスを予測できますか？</p>
<p>str(country_climate)`を使って推測をチェックする：</p>
<ul><li><p>期待通りですか？ なぜですか？ なぜだ？</p></li>
<li><p>データフレームを作成する際に、最後の 変数の後に
<code>stringsAsFactors = TRUE</code>
を追加してもう一度試してみてください。 今、何が起きているのか？
stringsAsFactors<code>は、</code>read.csv()`を使ってテキストベースの
のスプレッドシートをRに読み込むときにも設定できる。</p></li>
</ul><div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a>country_climate <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a>       <span class="at">country =</span> <span class="fu">c</span>(<span class="st">"Canada"</span>, <span class="st">"Panama"</span>, <span class="st">"South Africa"</span>, <span class="st">"Australia"</span>),</span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a>       <span class="at">climate =</span> <span class="fu">c</span>(<span class="st">"cold"</span>, <span class="st">"hot"</span>, <span class="st">"temperate"</span>, <span class="st">"hot/temperate"</span>)、</span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a>       <span class="at">temperature =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">30</span>, <span class="dv">18</span>, <span class="st">"15"</span>),</span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a>       <span class="at">northern_hemisphere =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="st">"FALSE"</span>),</span>
<span id="cb42-6"><a href="#cb42-6" tabindex="-1"></a>       <span class="at">has_kangaroo =</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="dv">1</span>)</span>
<span id="cb42-7"><a href="#cb42-7" tabindex="-1"></a>)</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  ソリューション
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">country_climate</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span></span>
<span>       country <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Canada"</span>, <span class="st">"Panama"</span>, <span class="st">"South Africa"</span>, <span class="st">"Australia"</span><span class="op">)</span>,</span>
<span>       climate <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"cold"</span>, <span class="st">"hot"</span>, <span class="st">"temperate"</span>, <span class="st">"hot/temperate"</span><span class="op">)</span>,</span>
<span>       temperature <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">10</span>, <span class="fl">30</span>, <span class="fl">18</span>, <span class="st">"15"</span><span class="op">)</span>,</span>
<span>       northern_hemisphere <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="st">"FALSE"</span><span class="op">)</span>,</span>
<span>       has_kangaroo <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="fl">1</span><span class="op">)</span></span>
<span>       <span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">country_climate</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">出力<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	4 obs. of  5 variables:
 $ country            : chr  "Canada" "Panama" "South Africa" "Australia"
 $ climate            : chr  "cold" "hot" "temperate" "hot/temperate"
 $ temperature        : chr  "10" "30" "18" "15"
 $ northern_hemisphere: chr  "TRUE" "TRUE" "FALSE" "FALSE"
 $ has_kangaroo       : num  0 0 0 1</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>データ型の自動変換は、時に恵みであり、時に 迷惑である。
その存在を認識し、ルールを学び、Rでインポートするデータ
がデータフレーム内で正しい型であることを再確認すること。
そうでない場合は、
データ入力中に生じたかもしれないミス（例えば、数字しか入っていないはずの列に文字が入っている）を検出するために、
を活用する。</p>
<p>詳しくはRStudio チュートリアルをご覧ください。</p>
</div>
</section><section><h2 class="section-heading" id="マトリックス">マトリックス<a class="anchor" aria-label="アンカー" href="#%E3%83%9E%E3%83%88%E3%83%AA%E3%83%83%E3%82%AF%E3%82%B9"></a>
<a class="anchor" aria-label="anchor" href="#%E3%83%9E%E3%83%88%E3%83%AA%E3%83%83%E3%82%AF%E3%82%B9"></a></h2>
<hr class="half-width"><p>先に進む前に、データ・フレームについて学んだので、
パッケージのインストールを復習し、新しいデータ型、すなわち
<code>matrix</code> について学んでみよう。
data.frame<code>のように、行列は行と 列の2つの次元を持つ。 しかし大きな違いは、</code>行列<code>のすべてのセルは 同じ型でなければならないということである：numeric</code>、<code>character</code>、<code>logical</code>、…
その点で、行列は <code>data.frame</code> よりも <code>vector</code>
に近い。</p>
<p>行列のデフォルトコンストラクタは <code>matrix</code> である。
行列を構成するための の値のベクトルと、行および/または の列数<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>を取る。
下の図（ ）のように、値は列に沿ってソートされる。</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">matrix</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span>, ncol <span class="op">=</span> <span class="fl">3</span>, nrow <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">m</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">出力<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9</code></pre>
</div>
<div id="チャレンジだ-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="チャレンジだ-4" class="callout-inner">
<h3 class="callout-title">チャレンジだ：<a class="anchor" aria-label="アンカー" href="#%E3%83%81%E3%83%A3%E3%83%AC%E3%83%B3%E3%82%B8%E3%81%A0-4"></a>
</h3>
<div class="callout-content">
<p>installed.packages()<code>という関数を使って、 あなたのコンピューターに現在インストールされているすべてのパッケージの情報を含む</code>文字`行列
を作成します。 探検してみよう。</p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">
  解決策
  </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##</span></span>
<span><span class="va">ip</span> <span class="op">&lt;-</span> <span class="fu">installed.packages</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">ip</span><span class="op">)</span></span>
<span><span class="co">## View(ip)</span></span>
<span><span class="co">## パッケージの数</span></span>
<span><span class="fu">nrow</span><span class="op">(</span><span class="va">ip</span><span class="op">)</span></span>
<span><span class="co">## インストールされている全てのパッケージの名前</span></span>
<span><span class="fu">rownames</span><span class="op">(</span><span class="va">ip</span><span class="op">)</span></span>
<span><span class="co">## 各パッケージに関する情報の種類</span></span>
<span><span class="fu">colnames</span><span class="op">(</span><span class="va">ip</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>テストデータとして、大規模なランダムデータ行列を作成することはしばしば有用である。
以下の練習問題は、平均0、標準偏差 1の正規分布から無作為に
データを抽出して、そのような行列を作成するものです。これは
<code>rnorm()</code> 関数で行うことができます。</p>
<div id="チャレンジだ-5" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="チャレンジだ-5" class="callout-inner">
<h3 class="callout-title">チャレンジだ：<a class="anchor" aria-label="アンカー" href="#%E3%83%81%E3%83%A3%E3%83%AC%E3%83%B3%E3%82%B8%E3%81%A0-5"></a>
</h3>
<div class="callout-content">
<p>正規分布データ （平均0、標準偏差1）の次元1000×3の行列を作る。</p>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7">
  ソリューション
  </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" aria-labelledby="headingSolution7" data-bs-parent="#accordionSolution7">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">set.seed</span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">matrix</span><span class="op">(</span><span class="fu">rnorm</span><span class="op">(</span><span class="fl">3000</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu">dim</span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">出力<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1000    3</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">出力<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>            [,1]        [,2]       [,3]
[1,] -0.56047565 -0.99579872 -0.5116037
[2,] -0.23017749 -1.03995504  0.2369379
[3,]  1.55870831 -0.01798024 -0.5415892
[4,]  0.07050839 -0.13217513  1.2192276
[5,]  0.12928774 -2.54934277  0.1741359
[6,]  1.71506499  1.04057346 -0.6152683</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="日付の書式設定">日付の書式設定<a class="anchor" aria-label="アンカー" href="#%E6%97%A5%E4%BB%98%E3%81%AE%E6%9B%B8%E5%BC%8F%E8%A8%AD%E5%AE%9A"></a>
<a class="anchor" aria-label="anchor" href="#%E6%97%A5%E4%BB%98%E3%81%AE%E6%9B%B8%E5%BC%8F%E8%A8%AD%E5%AE%9A"></a></h2>
<hr class="half-width"><p>新人（そしてベテラン！）が抱える最も一般的な問題の1つである。
Rユーザーは、 、日付と時刻の情報を、
適切で分析中に使用可能な変数に変換している。</p>
<div class="section level3">
<h3 id="表計算ソフトの日付に関する注意">表計算ソフトの日付に関する注意<a class="anchor" aria-label="anchor" href="#%E8%A1%A8%E8%A8%88%E7%AE%97%E3%82%BD%E3%83%95%E3%83%88%E3%81%AE%E6%97%A5%E4%BB%98%E3%81%AB%E9%96%A2%E3%81%99%E3%82%8B%E6%B3%A8%E6%84%8F"></a></h3>
<p>スプレッドシートの日付は通常、1つの列に格納される。
これが日付を記録する最も自然な方法のように思えるが、実際には
ベストプラクティスではない。 スプレッドシート・アプリケーションは、
一見正しい方法で日付を表示する（人間の観察者には）。しかし、実際に
どのように日付を処理し、保存するかには問題があるかもしれない。
YEAR、MONTH、DAYを別々のカラムに、または
、YEARとDAY-OF-YEARを別々のカラムに保存した方が、
より安全な場合が多い。</p>
<p>LibreOffice、Microsoft Excel、OpenOffice、
Gnumericなどの表計算プログラム。 は、
日付のエンコード方法が異なる（そしてしばしば互換性がない）（同じプログラムであっても、バージョンやオペレーティング
システム間で）。 さらに、エクセルは日付でないものを 日付に変える (<span class="citation">@Zeeberg:2004</span>)ことができる。例えば、MAR1、DEC1、
OCT4のような名前や識別子である。
そのため、全体的に日付フォーマットを避けているのであれば、
、こうした問題を特定しやすくなる。</p>
<p>Data CarpentryレッスンのDates as data
セクションでは、スプレッドシートを使った日付の落とし穴について、さらなる洞察
を提供しています。</p>
<p><strong>lubridate<code>** パッケージの</code>ymd()<code>関数を使用します (**tidyverse</code></strong>
に属します。詳しくは <a href="https://www.tidyverse.org/" class="external-link">こちら</a>)。
. **lubridate<code>**は**tidyverse</code>**のインストールの一部として 。
<strong><code>tidyverse</code></strong>
(<code><a href="https://tidyverse.tidyverse.org" class="external-link">library(tidyverse)</a></code>) をロードすると、コアパッケージ
(ほとんどのデータ分析で使用される パッケージ) がロードされます。
<strong><code>lubridate</code></strong>
しかし、コアTidyverseには属さないので、
<code><a href="https://lubridate.tidyverse.org" class="external-link">library(lubridate)</a></code>で明示的にロードする必要があります。</p>
<p>必要なパッケージをロードすることから始める：</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"lubridate"</span><span class="op">)</span></span></code></pre>
</div>
<p>ymd()<code>は年、月、日を表すベクトルを受け取り、</code>Date<code>ベクトルに変換する。 Date</code>はRが
、日付であると認識するデータのクラスであり、そのように操作することができる。
関数が必要とする引数は柔軟であるが、ベストプラクティスとしては、“YYYY-MM-DD”としてフォーマットされた文字
ベクトルである。</p>
<p>日付オブジェクトを作成し、構造を調べてみよう：</p>
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_date</span> <span class="op">&lt;-</span> <span class="fu">ymd</span><span class="op">(</span><span class="st">"2015-01-01"</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">my_date</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">出力<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> Date[1:1], format: "2015-01-01"</code></pre>
</div>
<p>では、年、月、日を別々に貼り付けてみよう：</p>
<div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># sep は各コンポーネントを区切るために使う文字を示す</span></span>
<span><span class="va">my_date</span> <span class="op">&lt;-</span> <span class="fu">ymd</span><span class="op">(</span><span class="fu">paste</span><span class="op">(</span><span class="st">"2015"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, sep <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">my_date</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">出力<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> Date[1:1], format: "2015-01-01"</code></pre>
</div>
<p>それでは、典型的な日付操作 のパイプラインに慣れておこう。
以下の小さなデータには、異なる <code>year</code>、
<code>month</code>、<code>day</code> 列に日付が格納されている。</p>
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>year <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1996</span>, <span class="fl">1992</span>, <span class="fl">1987</span>, <span class="fl">1986</span>, <span class="fl">2000</span>, <span class="fl">1990</span>, <span class="fl">2002</span>, <span class="fl">1994</span>, <span class="fl">1997</span>, <span class="fl">1985</span><span class="op">)</span>,</span>
<span>                month <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">10</span>, <span class="fl">1</span>, <span class="fl">8</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>                day <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">24</span>, <span class="fl">8</span>, <span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">8</span>, <span class="fl">17</span>, <span class="fl">13</span>, <span class="fl">10</span>, <span class="fl">11</span>, <span class="fl">24</span><span class="op">)</span>,</span>
<span>                value <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">1</span>, <span class="fl">9</span>, <span class="fl">3</span>, <span class="fl">8</span>, <span class="fl">10</span>, <span class="fl">2</span>, <span class="fl">6</span>, <span class="fl">7</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in data.frame(year = c(1996, 1992, 1987, 1986, 2000, 1990, 2002, : arguments imply differing number of rows: 10, 9</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'x' not found</code></pre>
</div>
<p>次に、この関数を <code>x</code> データセットに適用する。
まず、<code>paste()</code> を使って、<code>x</code> の
<code>year</code>、<code>month</code>、<code>day</code> 列から
の文字ベクトルを作る：</p>
<div class="codewrapper sourceCode" id="cb61">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">paste</span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">year</span>, <span class="va">x</span><span class="op">$</span><span class="va">month</span>, <span class="va">x</span><span class="op">$</span><span class="va">day</span>, sep <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'x' not found</code></pre>
</div>
<p>この文字ベクトルは <code>ymd()</code>
の引数として使うことができる：</p>
<div class="codewrapper sourceCode" id="cb63">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ymd</span><span class="op">(</span><span class="fu">paste</span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">year</span>, <span class="va">x</span><span class="op">$</span><span class="va">month</span>, <span class="va">x</span><span class="op">$</span><span class="va">day</span>, sep <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'x' not found</code></pre>
</div>
<p>出来上がった <code>Date</code> ベクトルは <code>x</code> に
<code>date</code> という新しいカラムとして追加することができる：</p>
<div class="codewrapper sourceCode" id="cb65">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">ymd</span><span class="op">(</span><span class="fu">paste</span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">year</span>, <span class="va">x</span><span class="op">$</span><span class="va">month</span>, <span class="va">x</span><span class="op">$</span><span class="va">day</span>, sep <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'x' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb67">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># '日付'をクラスとする新しいカラムに注目。</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'x' not found</code></pre>
</div>
<p>すべてが正しく機能していることを確認しよう。
新しいカラムを検査する一つの方法は、<code>summary()</code>を使うことである：</p>
<div class="codewrapper sourceCode" id="cb69">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">summary</span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">date</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'x' not found</code></pre>
</div>
<p>ymd()<code>は、年、月、日を の順番で持つことを期待している。 例えば、日、月、年があれば、</code>dmy()`
が必要になる。</p>
<div class="codewrapper sourceCode" id="cb71">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dmy</span><span class="op">(</span><span class="fu">paste</span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">day</span>, <span class="va">x</span><span class="op">$</span><span class="va">month</span>, <span class="va">x</span><span class="op">$</span><span class="va">year</span>, sep <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">エラー<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'x' not found</code></pre>
</div>
<p>lubdridate`は、あらゆる日付のバリエーションに対応する多くの関数を持っている。</p>
</div>
</section><section><h2 class="section-heading" id="rオブジェクトの概要">Rオブジェクトの概要<a class="anchor" aria-label="アンカー" href="#r%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E6%A6%82%E8%A6%81"></a>
<a class="anchor" aria-label="anchor" href="#r%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E6%A6%82%E8%A6%81"></a></h2>
<hr class="half-width"><p>これまで、次元数（ ）、格納できるデータの種類（
）が単一か複数かによって異なる、いくつかのタイプのRオブジェクトを見てきた：</p>
<ul><li>
<strong>vector`</strong>：1次元（長さがある）、1種類のデータ。</li>
<li>
<strong>マトリックス`</strong>：2次元、単一データ型。</li>
<li>
<strong>data.frame`</strong>：2次元、1列1型。</li>
</ul></section><section><h2 class="section-heading" id="リスト">リスト<a class="anchor" aria-label="アンカー" href="#%E3%83%AA%E3%82%B9%E3%83%88"></a>
<a class="anchor" aria-label="anchor" href="#%E3%83%AA%E3%82%B9%E3%83%88"></a></h2>
<hr class="half-width"><p>まだ見ていないが、知っておくと便利なデータ型がリストだ。
、先ほどのまとめから続く：</p>
<ul><li>
<strong><code>list</code></strong>:
1つの次元で、各項目は異なるデータ 型にすることができる。</li>
</ul><p>以下では、数値、文字、
行列、データフレーム、別のリストのベクトルを含むリストを作ってみよう：</p>
<div class="codewrapper sourceCode" id="cb73">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu">list</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="co">## numeric</span></span>
<span>          <span class="va">letters</span>, <span class="co">## character</span></span>
<span>          <span class="fu">installed.packages</span><span class="op">(</span><span class="op">)</span>, <span class="co">## a matrix</span></span>
<span>          <span class="va">cars</span>, <span class="co">## a data.frame</span></span>
<span>          <span class="fu">list</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="co">## a list</span></span>
<span><span class="fu">length</span><span class="op">(</span><span class="va">l</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">出力<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 5</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb75">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">l</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">出力<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>List of 5
 $ : int [1:10] 1 2 3 4 5 6 7 8 9 10
 $ : chr [1:26] "a" "b" "c" "d" ...
 $ : chr [1:187, 1:16] "askpass" "assertthat" "backports" "base64enc" ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : chr [1:187] "askpass" "assertthat" "backports" "base64enc" ...
  .. ..$ : chr [1:16] "Package" "LibPath" "Version" "Priority" ...
 $ :'data.frame':	50 obs. of  2 variables:
  ..$ speed: num [1:50] 4 4 7 7 8 9 10 10 10 11 ...
  ..$ dist : num [1:50] 2 10 4 22 16 10 18 26 34 17 ...
 $ :List of 3
  ..$ : num 1
  ..$ : num 2
  ..$ : num 3</code></pre>
</div>
<p>リストのサブセットは <code>[]</code>
を使って新しいサブリストをサブセットするか、<code>[]]</code>
を使ってそのリストの単一要素を取り出す（
リストに名前がついている場合は、インデックスか名前を使う）。</p>
<div class="codewrapper sourceCode" id="cb77">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">l</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="co">##</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">出力<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb79">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">l</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span> <span class="co">## 長さ 2 のリスト</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">出力<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[[1]]
 [1]  1  2  3  4  5  6  7  8  9 10

[[2]]
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s"
[20] "t" "u" "v" "w" "x" "y" "z"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb81">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">l</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="co">## 長さ 1 のリスト</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">出力<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[[1]]
 [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</section><section><h2 class="section-heading" id="sec:exportandsave">表形式データのエクスポートと保存<a class="anchor" aria-label="アンカー" href="#sec:exportandsave"></a>
<a class="anchor" aria-label="anchor" href="#sec:exportandsave"></a></h2>
<hr class="half-width"><p><code>read.table</code>
ファミリーの関数を使って、テキストベースのスプレッドシートをRに読み込む方法を見てきた。
data.frame<code>を テキストベースのスプレッドシートにエクスポートするには、 関数の</code>write.table<code>セット（</code>write.csv<code>,</code>write.delim<code>, ...）を使用します。 これらはすべて、 エクスポートする変数と、エクスポートするファイルを指定する。 例えば、</code>rna<code>のデータを</code>data_output<code>ディレクトリの</code>my_rna.csv`
ファイルにエクスポートするには、次のように実行する：</p>
<div class="codewrapper sourceCode" id="cb83">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">write.csv</span><span class="op">(</span><span class="va">rna</span>, file <span class="op">=</span> <span class="st">"data_output/my_rna.csv"</span><span class="op">)</span></span></code></pre>
</div>
<p>この新しいcsvファイルは、
、Rに精通していない他の共同研究者と共有することができます。<code>data.frame</code>のフィールドの一部（例えば、“product”列を参照）にカンマがあるにもかかわらず、Rはデフォルトで
、各フィールドを引用符で囲みます。したがって、
、列の区切り文字としてカンマを使用しているにもかかわらず、
、Rに正しく読み込むことができます。</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">まとめ<a class="anchor" aria-label="アンカー" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul><li>Rでの表形式データ</li>
</ul></div>
</div>
</div>
</section><div class="footnotes footnotes-end-of-document">
<hr><ol><li id="fn1"><p>行数か列数のどちらかだけで十分で、もう一方は値の長さから推測できる。
値と行／列の数が合わない場合に何が起こるか試してみてください。<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol></div>



      </div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="前の章と次の章"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="23-starting-with-r.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>前へ</a>
        <a class="chapter-link float-end" href="30-dplyr.html">次へ<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="23-starting-with-r.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          前へ: R の紹介
        </a>
        <a class="chapter-link float-end" href="30-dplyr.html" rel="next">
          次へ: dplyrによるデータの操作と分析...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>このレッスンは<a href="CODE_OF_CONDUCT.html">行動規範</a>の対象となっている</p>
        <p>

        <a href="https://github.com/carpentries-incubator/bioc-intro/edit/main/episodes/25-starting-with-data.Rmd" class="external-link">GitHubで編集</a>

	
        | <a href="https://github.com/carpentries-incubator/bioc-intro/blob/main/CONTRIBUTING.md" class="external-link">貢献</a>
        | <a href="https://github.com/carpentries-incubator/bioc-intro/" class="external-link">ソース</a></p>
				<p><a href="https://github.com/carpentries-incubator/bioc-intro/blob/main/CITATION" class="external-link">引用</a> | <a href="mailto:laurent.gatto@uclouvain.be">お問い合わせ</a> | <a href="https://carpentries.org/about/" class="external-link">概要</a></p>
			</div>
			<div class="col-md-6">

        <p>材料は著者によって<a href="LICENSE.html">CC-BY 4.0</a>のもとに掲載を許諾されている</p>

        <p>テンプレートは<a href="https://carpentries.org/" class="external-link">The Carpentries</a>によって<a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a>のもとに掲載を許諾されている</p>
        <p>このレッスンは<a href="https://github.com/carpentries/sandpaper/tree/0.16.5" class="external-link">sandpaper (0.16.5)</a>、<a href="https://github.com/carpentries/pegboard/tree/0.7.6" class="external-link">pegboard (0.7.6)</a>、および<a href="https://github.com/carpentries/varnish/tree/1.0.3" class="external-link">varnish (1.0.3)</a>によって作られた</p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="上へ戻る"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top -->
      上へ<span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">戻る</span>
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://carpentries-incubator.github.io/bioc-intro/25-starting-with-data.html",
  "inLanguage": "ja",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "データから始める",
  "creativeWorkStatus": "active",
  "url": "https://carpentries-incubator.github.io/bioc-intro/25-starting-with-data.html",
  "identifier": "https://carpentries-incubator.github.io/bioc-intro/25-starting-with-data.html",
  "dateCreated": "2020-09-14",
  "dateModified": "2024-09-08",
  "datePublished": "2024-09-08"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

